class: CommandLineTool
label: VarScan Somatic
baseCommand: ['python', '/opt/VarScanSomaticVcf.py']
requirements:
  - class: "DockerRequirement"
    dockerImageId: "opengenomics/varscan:2.3.9"
inputs:
  - id: "#normal_pileup"
    type: File
    inputBinding:
      position: 1
      
  - id: "#tumor_pileup"
    type: File
    inputBinding:
      prefix: --input_file:tumor
      secondaryFiles:
        - .bai
  
  - id: "#min_coverage"
    type: int
    inputBinding:
      prefix: --min-coverage

  - id: "#min_coverage_normal"
    type: int
    inputBinding:
      prefix: --min-coverage-normal
      
  - id: "#min_coverage_tumor"
    type: int
    inputBinding:
      prefix: --min-coverage-tumor
      
  - id: "#min_var_freq"
    type: float
    inputBinding:
      prefix: --min-var-freq

  - id: "#min_freq_for_hom"
    type: int
    inputBinding:
      prefix: --min-freq-for-hom
      
  - id: "#normal_purity"
    type: int
    inputBinding:
      prefix: --normal-purity

  - id: "#tumor_purity"
    type: int
    inputBinding:
      prefix: --tumor-purity
      
  - id: "#p_value"
    type: float
    inputBinding:
      prefix: --p-value
      
  - id: "#somatic_p_value"
    type: float
    inputBinding:
      prefix: --somatic-p-value

  - id: "#strand_filter"
    type: boolean
    inputBinding:
      prefix: --min-coverage

  - id: "#validation"
    type: boolean
    inputBinding:
      prefix: --min-coverage
      
outputs:
  
  - id: "#call_stats"
    type: File
    outputBinding:
      glob:
        engine: "cwl:JsonPointer"
        script: job/out
        
  - id: "#mutations"
    type: File
    outputBinding:
      glob:
        engine: "cwl:JsonPointer"
        script: job/vcf
        
